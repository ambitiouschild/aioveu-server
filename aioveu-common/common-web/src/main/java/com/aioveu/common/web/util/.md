


åœ¨Spring Cloud Gatewayä¸­ï¼Œä½¿ç”¨Jakarta Servlet APIï¼ˆå¦‚HttpServletResponseï¼‰ç¡®å®å¯èƒ½å¯¼è‡´å†²çªï¼Œ
å› ä¸ºGatewayæ˜¯åŸºäºWebFluxï¼ˆå“åº”å¼æ ˆï¼‰çš„ï¼Œè€ŒServlet APIæ˜¯åŸºäºé˜»å¡å¼çš„Servletæ ˆã€‚


jakarta.servlet.http.HttpServletResponseæ˜¯ Servlet è§„èŒƒ çš„ä¸€éƒ¨åˆ†ï¼Œå±äºä¼ ç»Ÿçš„ é˜»å¡å¼ Spring MVC æŠ€æœ¯æ ˆã€‚

è€Œ Spring Cloud Gateway æ˜¯åŸºäº å“åº”å¼ç¼–ç¨‹ï¼ˆWebFluxï¼‰ çš„ï¼Œä¸¤è€…æŠ€æœ¯æ ˆä¸å…¼å®¹ã€‚


æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ WebFlux çš„å“åº”å¼æ›¿ä»£æ–¹æ¡ˆ

// âŒ é”™è¯¯çš„ Servlet æ–¹å¼
import jakarta.servlet.http.HttpServletResponse;

// âœ… æ­£ç¡®çš„ WebFlux æ–¹å¼
import org.springframework.http.server.reactive.ServerHttpResponse;
import org.springframework.http.HttpHeaders;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.server.ServerWebExchange;
import reactor.core.publisher.Mono;


æ–¹æ¡ˆä¸‰ï¼šä¸šåŠ¡é€»è¾‘é‡æ„

å¦‚æœç¡®å®éœ€è¦ Servlet åŠŸèƒ½ï¼Œè€ƒè™‘ï¼š

å°†ç›¸å…³åŠŸèƒ½ç§»åˆ°ä¸‹æ¸¸æœåŠ¡ï¼ˆä¸šåŠ¡å¾®æœåŠ¡ï¼‰

ä½¿ç”¨ WebClient è¿›è¡ŒæœåŠ¡é—´é€šä¿¡

åœ¨ Gateway ä¸­åªåšè·¯ç”±ã€è®¤è¯ç­‰ç½‘å…³èŒè´£


å¼ºçƒˆå»ºè®®å½»åº•ç§»é™¤ Servlet API ä¾èµ–ï¼Œå› ä¸ºï¼š

Gateway çš„æ ¸å¿ƒä¼˜åŠ¿å°±æ˜¯éé˜»å¡é«˜æ€§èƒ½

Servlet é˜»å¡æ¨¡å‹ä¼šä¸¥é‡å½±å“ç½‘å…³æ€§èƒ½

å“åº”å¼ç¼–ç¨‹æ˜¯å¾®æœåŠ¡ç½‘å…³çš„æœªæ¥è¶‹åŠ¿


ä¼šçš„ï¼è¿™ç§ä¾èµ–ä¼ é€’ä¼šå¯¼è‡´ Gateway å¾®æœåŠ¡å†²çªï¼

------------------------------------------------------------
ğŸ” é—®é¢˜åˆ†æ

å³ä½¿ Servlet API åªåœ¨ commonæ¨¡å—ä¸­ä½¿ç”¨ï¼Œä½† Gateway ä¾èµ–äº† commonï¼Œå°±ä¼šäº§ç”Ÿ ä¾èµ–ä¼ é€’ï¼Œå¯¼è‡´ï¼š

ç±»è·¯å¾„æ±¡æŸ“ï¼šServlet ç›¸å…³çš„ç±»ä¼šè¢«åŠ è½½åˆ° Classpath

è‡ªåŠ¨é…ç½®å†²çªï¼šSpring ä¼šæ£€æµ‹åˆ° Servlet API å¹¶å°è¯•é…ç½® MVC

å¯åŠ¨å¤±è´¥ï¼šå‡ºç°ä½ æ—¥å¿—ä¸­çš„å…¼å®¹æ€§é”™è¯¯

æ¨¡å—åŒ–è®¾è®¡ï¼šå°† Web ç›¸å…³ä»£ç ä¸æ ¸å¿ƒä¸šåŠ¡é€»è¾‘åˆ†ç¦»

æ˜ç¡®èŒè´£ï¼šGateway åªè´Ÿè´£è·¯ç”±ã€è®¤è¯ç­‰ç½‘å…³åŠŸèƒ½

æŠ€æœ¯æ ˆä¸€è‡´ï¼šç¡®ä¿ä¾èµ–é“¾ä¸­çš„æ‰€æœ‰æ¨¡å—æŠ€æœ¯æ ˆå…¼å®¹

æ¡ä»¶åŒ–é…ç½®ï¼šä½¿ç”¨ Spring Boot çš„æ¡ä»¶æ³¨è§£é¿å…å†²çª

æ¨èé‡‡ç”¨æ–¹æ¡ˆä¸€ï¼ˆæ¨¡å—æ‹†åˆ†ï¼‰ï¼Œè¿™æ˜¯æœ€å½»åº•ã€æœ€è§„èŒƒçš„è§£å†³æ–¹æ¡ˆã€‚